<h2>배경</h2>
웹 서비스가 주기적으로 down되면서 메모리 등의 사용량을 자체 모니터링 할 수 있는 시스템 필요

<h2>모니터링 툴 종류</h2>
1. ELK Stack (Elasticsearch, Logstash, Kibana)
2. Zabbix
3. Grafana + Nagios 또는 Prometheus
4. Datadog
5. Amazon CloudWatch

<h2>그라파나 사용하기</h2>
<h3>0. 선택이유</h3>
원하는 기능인 수집, 알람, 스냅샷까지 가능하며, 이 모든걸 무료로 사용할 수 있다. 
또한 GUI와 템플릿이 굉장히 잘 되어있다.

<h3>1. 노드 익스포터</h3>
수집을 원하는 서버에 노드 익스포터를 설치해주면 프로메테우스에서 인스턴스를 관리하고 데이터를 가공할 수 있다. 

<h3>2. 프로메테우스</h3>
각 서버에서 노드 익스포터가 수집해온 매트릭 정보를 바탕으로 promQL이라고 하는 프로메테우스 쿼리를 통해 그라파나에 그래프 등으로 표시해준다. 

<h3>4. 그라파나</h3>
- admin, editor, viewer의 계정을 각각 생성할 수 있다.
- 쿼리를 통해 원하는 정보(cpu usage, ram usage, disk 등)를 조회하여 그래프로 나타낼 수 있다. 해당 정보는 각 서버에 설치한 노드별로 정보를 가져온다. 
- Alert 기능을 통해 smtp 설정으로 메일 알람, api hook으로 slack 등의 어플리케이션 알람 등 설정이 가능하다. 

<h3>5. 마무리</h3>
해당 서비스를 이용해 누구나 모니터링 할 수 있는 시스템과 사용량 알림을 구축하였다. 
사용량 관리를 해야하는 업무를 자동화 하면서 비용은 줄이고, 효율은 높일 수 있었다.  

*설치 및 설정 관련해서 추후에 링크 업데이트 예정이다.